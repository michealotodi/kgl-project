{% extends "base.html" %}
{% load static %}

{% block title %}Manager Dashboard - {{ branch }}{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2 class="text-primary mb-4">Manager Dashboard - {{ branch }}</h2>

  <!-- Summary Stats -->
  <div class="row text-center">
    <div class="col-md-3 mb-4">
      <div class="p-3 bg-light border rounded shadow-sm">
        <h6>Total Procured (Kg)</h6>
        <p class="display-6">{{ total_procured }}</p>
      </div>
    </div>
    <div class="col-md-3 mb-4">
      <div class="p-3 bg-light border rounded shadow-sm">
        <h6>Total Sold (Kg)</h6>
        <p class="display-6">{{ total_sales }}</p>
      </div>
    </div>
    <div class="col-md-3 mb-4">
      <div class="p-3 bg-light border rounded shadow-sm">
        <h6>Total Credit Sales (Kg)</h6>
        <p class="display-6">{{ total_credit_sales }}</p>
      </div>
    </div>
    <div class="col-md-3 mb-4">
      <div class="p-3 bg-light border rounded shadow-sm">
        <h6>Total Due (UGX)</h6>
        <p class="display-6">UGX {{ total_due }}</p>
      </div>
    </div>
  </div>

  <!-- Today's Stats -->
  <h4 class="text-secondary mt-4">Today's Summary</h4>
  <div class="row text-center">
    <div class="col-md-3 mb-3">
      <div class="p-3 bg-white border rounded">
        <h6>Procured (Kg)</h6>
        <p class="display-6">{{ today_procured }}</p>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="p-3 bg-white border rounded">
        <h6>Sold (Kg)</h6>
        <p class="display-6">{{ today_sales_kg }}</p>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="p-3 bg-white border rounded">
        <h6>Sales Amount (UGX)</h6>
        <p class="display-6">UGX {{ today_sales_amount }}</p>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="p-3 bg-white border rounded">
        <h6>Credit (Kg)</h6>
        <p class="display-6">{{ today_credit_kg }}</p>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="p-3 bg-white border rounded">
        <h6>Credit Due (UGX)</h6>
        <p class="display-6">UGX {{ today_credit_amount }}</p>
      </div>
    </div>
  </div>

  <!-- Monthly Stats -->
  <h4 class="text-secondary mt-4">Monthly Summary</h4>
  <div class="row text-center">
    <div class="col-md-3 mb-3">
      <div class="p-3 bg-white border rounded">
        <h6>Procured (Kg)</h6>
        <p class="display-6">{{ month_procured }}</p>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="p-3 bg-white border rounded">
        <h6>Sold (Kg)</h6>
        <p class="display-6">{{ month_sales_kg }}</p>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="p-3 bg-white border rounded">
        <h6>Sales Amount (UGX)</h6>
        <p class="display-6">UGX {{ month_sales_amount }}</p>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="p-3 bg-white border rounded">
        <h6>Credit (Kg)</h6>
        <p class="display-6">{{ month_credit_kg }}</p>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="p-3 bg-white border rounded">
        <h6>Credit Due (UGX)</h6>
        <p class="display-6">UGX {{ month_credit_amount }}</p>
      </div>
    </div>
  </div>

  <!-- Optional: Low Stock -->
  {% if low_stock_items %}
  <h4 class="text-danger mt-5">Low Stock Items</h4>
  <ul class="list-group">
    {% for item in low_stock_items %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      {{ item.item }} ({{ item.quantity }} Kg)
      <span class="badge bg-warning text-dark">Low</span>
    </li>
    {% endfor %}
  </ul>
  {% endif %}
</div>

<footer class="site-footer mt-5">
  <p>&copy; 2025 KGLApp. All rights reserved.</p>
  <p>Contact us: <a href="mailto:info@kglapp.com">info@kglapp.com</a></p>
</footer>
{% endblock %}
